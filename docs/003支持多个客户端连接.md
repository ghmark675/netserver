# 前言

001,002的`server.cpp`是一个最基础的版本，从代码就可以看出它只能处理一个客户端的连接，下面我们想办法让服务端能同时与多个客户端交互

# 函数功能剖析
服务端调用`listen()`开始监听后，如果有客户端通过`connect()`函数请求建立连接，此时会首先完成TCP三次握手，然后将客户端放入**连接队列**，等待服务端调用`accept()`以从连接队列中取出一个连接然后进行后续处理

# 核心问题

1. `accept()`多次，以取出多个客户端的连接处理
  方法很简单，只要将`accept`及后续处理的代码放入`while (true)`的死循环内即可
2. 如果采用死循环方式，那么server只能在处理完一个客户端后才能处理下一个，效率较低
  这里想到用多进程/线程的方式

代码较简单，只需在002的`main.cpp`的基础上做少量修改即可实现，不再赘述

# 注意事项
值得一提的是（以多进程实现为例），父进程只处理**监听+连接**，创建的子进程只处理**数据交互**，所以在各自进程中，要及时`close()`掉不需要的socket。